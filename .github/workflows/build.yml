name: Build JRMemory Framework

on:
  workflow_dispatch:
  push:
    branches: [ main ]

jobs:
  framework:
    runs-on: macos-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: 打包 JRMemory.framework
        run: |
          set -e
          ls -R .

          mkdir -p build
          cp -R JRMemory.framework build/

          cd build
          zip -r JRMemory.framework.zip JRMemory.framework

      - name: 上传 Framework
        uses: actions/upload-artifact@v4
        with:
          name: JRMemory-framework
          path: build/JRMemory.framework.zip
